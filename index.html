<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Floop.fun - Meme Token Creator</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="icon" href="https://floppfun.com/favicon.ico" type="image/x-icon" />
  <meta name="description" content="Create and launch meme tokens instantly on Solana. No presale. No dev wallet." />
  <meta property="og:title" content="Floop.fun - Launch Your Meme Token on Solana" />
  <meta property="og:description" content="No presale. No dev wallet. Just pure meme magic." />
  <meta property="og:url" content="https://floppfun.com/" />
  <meta property="og:image" content="https://floppfun.com/preview.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Floop.fun - Meme Token Creator on Solana" />
  <meta name="twitter:description" content="No presale. No dev wallet. Launch your own meme token now!" />
  <meta name="twitter:image" content="https://floppfun.com/preview.jpg" />
  <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@solana/spl-token@latest/lib/index.iife.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
  <!-- √úST MEN√ú -->
  <header class="main-header">
    <div class="nav-left">
      <img src="images/floop-mascot.png" class="logo-icon" alt="Floop" />
      <h1 class="logo-text">Floop.fun</h1>
    </div>
    <div class="nav-right">
      <button id="connectWallet" class="connect-btn">baƒülamak</button>
      <button class="icon-btn" id="searchBtn">üîç</button>
      <button class="icon-btn" id="menuBtn">‚ò∞</button>
    </div>
  </header>

  <!-- MOBƒ∞L MEN√ú -->
  <div class="mobile-menu" id="mobileMenu">
    <ul>
      <li><span>‚ú®</span> bir tarikat ba≈ülatƒ±n (√ºcretsiz!)</li>
      <li><span>üìÑ</span> Uwu bu ne</li>
      <li><span>üîç</span> Solscan'da BOOP</li>
      <li><span>‚úàÔ∏è</span> telegrama katƒ±l</li>
      <li><span>ùïè</span> x'i takip et</li>
    </ul>
  </div>

  <!-- KAOS Gƒ∞Rƒ∞≈ûƒ∞ (maskot + animasyon + buton alanƒ± PART 2'de gelecek) -->

  <!-- HERO -->
  <main class="hero-section">
    <div class="hero-content">
      <h2 class="hero-title">Launch Your Meme Token</h2>
      <p class="hero-subtitle">No presale. No dev wallet. Just pure meme magic.</p>
      <button id="launchBtn" class="launch-btn">Release The Chaos</button>
    </div>
  </main>

  <!-- ORTA Fƒ∞LTRE BUTONLARI -->
  <section class="filter-bar">
    <button class="filter-btn active">Yeni Ba≈ülatƒ±ldƒ±</button>
    <button class="filter-btn">Mezun Olmak √úzere</button>
    <button class="filter-btn">En Y√ºksek MCAP</button>
    <button class="filter-btn">Hacme G√∂re</button>
    <button class="filter-btn">En √áok Flooplananlar</button>
  </section>
  <!-- CHAOS ANƒ∞MASYONU (zƒ±playan Solana + ate≈ü + maskot) -->
  <section id="chaosAnimation" class="chaos-animation">
    <div class="chaos-container">
      <img src="images/solana.svg" alt="Solana" class="solana-bounce" />
      <img src="images/fire.gif" alt="Fire" class="chaos-fire" />
      <img src="images/floop-mascot.png" alt="Mascot" class="mascot-img" />
    </div>
  </section>

  <!-- TOKEN FORMU -->
  <section id="tokenFormSection" class="form-wrapper hidden">
    <h3>Create Your Token</h3>
    <form id="tokenForm">
      <input type="text" id="tokenName" placeholder="Token Name" required />
      <input type="text" id="tokenSymbol" placeholder="Symbol (e.g. FLOP)" maxlength="5" required />
      <input type="number" id="tokenSupply" placeholder="Total Supply" required min="1" />
      <input type="url" id="tokenImage" placeholder="Image URL (optional)" />
      <textarea id="tokenDescription" placeholder="Describe your token (optional)"></textarea>
      <input type="url" id="socialLink" placeholder="Social Media Link (optional)" />
      <button type="submit">Create Token</button>
    </form>
    <div id="formStatus" class="wallet-status"></div>
  </section>
  <!-- TOP FLOOPED TOKENLAR -->
  <section id="topTokens">
    <h3>Top Flooped Tokens</h3>
    <ul id="topFloopList"></ul>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>&copy; 2025 Floop.fun. All rights reserved.</p>
  </footer>

  <!-- SCRIPT BA≈ûLANGICI -->
  <script>
    const connectBtn = document.getElementById("connectWallet");
    const launchBtn = document.getElementById("launchBtn");
    const formSection = document.getElementById("tokenFormSection");
    const chaos = document.getElementById("chaosAnimation");
    const mobileMenu = document.getElementById("mobileMenu");
    const menuBtn = document.getElementById("menuBtn");
    let userPublicKey = null;

    // Mobil men√º toggle
    let menuOpen = false;
    menuBtn.addEventListener("click", () => {
      menuOpen = !menuOpen;
      mobileMenu.style.display = menuOpen ? "block" : "none";
    });

    // CHAOS TETƒ∞ƒûƒ∞ (animasyon g√∂ster + 3sn sonra formu a√ß)
    launchBtn.addEventListener("click", () => {
      chaos.style.display = "flex";
      formSection.classList.add("hidden");
      setTimeout(() => {
        chaos.style.display = "none";
        formSection.classList.remove("hidden");
        formSection.scrollIntoView({ behavior: "smooth" });
      }, 3000);
    });

    // Wallet baƒülantƒ±sƒ±
    async function connectWallet() {
      if ("solana" in window) {
        const provider = window.solana;
        if (provider.isPhantom) {
          try {
            const response = await provider.connect();
            userPublicKey = response.publicKey;
            connectBtn.innerText = "Connected";
            connectBtn.disabled = true;
          } catch (err) {
            alert("Baƒülantƒ± iptal edildi.");
          }
        } else {
          alert("Phantom Wallet y√ºkl√º deƒüil.");
        }
      } else {
        alert("Solana tarayƒ±cƒ± desteƒüi yok.");
      }
    }

    connectBtn.addEventListener("click", connectWallet);
    // Supabase baƒülantƒ±sƒ±
    const supabaseUrl = 'https://ugzbsmmaxxklojwlijrt.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFz...'; // kƒ±sa tutuldu
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    // Top Tokenlarƒ± Y√ºkle
    async function loadTopTokens() {
      const { data, error } = await supabase
        .from('floop_counts')
        .select('*')
        .order('count', { ascending: false })
        .limit(5);

      const list = document.getElementById("topFloopList");
      if (data && data.length > 0) {
        data.forEach((token) => {
          const li = document.createElement("li");
          li.innerHTML = `<a href="token.html?mint=${token.mint}&symbol=FLOOP">${token.mint} ‚Äî ${token.count} floops</a>`;
          list.appendChild(li);
        });
      } else {
        list.innerHTML = "<li>No tokens yet.</li>";
      }
    }

    loadTopTokens();

    // Token Olu≈üturma
    const tokenForm = document.getElementById("tokenForm");
    const formStatus = document.getElementById("formStatus");

    tokenForm.addEventListener("submit", async function (e) {
      e.preventDefault();

      const name = document.getElementById("tokenName").value.trim();
      const symbol = document.getElementById("tokenSymbol").value.trim();
      const supply = parseInt(document.getElementById("tokenSupply").value.trim());
      const description = document.getElementById("tokenDescription").value.trim();
      const socialLink = document.getElementById("socialLink").value.trim();
      const imageUrl = document.getElementById("tokenImage").value.trim();

      if (!userPublicKey) {
        formStatus.innerText = "Please connect your wallet first.";
        formStatus.style.color = "orange";
        return;
      }

      formStatus.innerText = "Creating token on Solana...";
      formStatus.style.color = "blue";

      try {
        // Ger√ßek token olu≈üturma i≈ülemi burada entegre edilecek
        formStatus.innerText = "Token created successfully! (mock)";
        formStatus.style.color = "lime";
      } catch (err) {
        console.error(err);
        formStatus.innerText = "Token creation failed.";
        formStatus.style.color = "red";
      }
    });
  </script>
</body>
</html>
